<!DOCTYPE html>
<!---
	Michael Nguyen
	5470399
	3/2/2016
-->
<html lang="en">
<head>
<meta charset="utf-8">
<title>JSJQ Assignment 3 - MPG</title>

<style>
  body, input {
      font-family: arial, sans-serif;
      font-size: 100%;
  }

  h3 {
      margin-bottom: 25px;
  }

  label {
      clear: left;       
      display: block;
      width: 150px;
      height: 22px;       /* added to match default border on text box */ 
      margin-bottom: 10px;
      margin-right: 10px;        
      padding: 10px; 
      text-align: right;
      float: left;
  }

  input[type=text] {
      display: block;
      float: left; 
      width: 100px;
      height: 20px;
      margin-right: 10px;
      margin-bottom: 10px;
      padding: 10px;
  }

  input:not([type=text]) {
      display: block;
      margin-top: 25px;
      padding: 10px;
  }

  span {
      color: red;
      display: block;
      float: left;
  }

  .clear{
      clear: left;
  }
</style>

<script type="text/javascript">
// Function to be called on button click event: clear the form and error messages
var clearForm = function(){

	// Clear any input values in textboxes
	document.getElementById("miles_driven").value = "";
	document.getElementById("gallons_used").value = "";
	document.getElementById("price_gallon").value = "";

	// Clear error messages
	miles_driven_error.firstChild.nodeValue = "";
	gallons_used_error.firstChild.nodeValue = "";
	price_gallon_error.firstChild.nodeValue = "";

	// Clear results
	document.getElementById("mpg").firstChild.nodeValue = "";
	document.getElementById("cost").firstChild.nodeValue = "";
      
}

// Function to be called on button click event: calculates MPG using three input values	
var calculateMPGAndCost = function(){

	// Variables for textbox values
	var miles_driven = document.getElementById("miles_driven").value;
	var gallons_used = document.getElementById("gallons_used").value;
	var price_gallon = document.getElementById("price_gallon").value;

	// Variables for error messages
	var miles_driven_error = document.getElementById("miles_driven_error");
	var gallons_used_error = document.getElementById("gallons_used_error");
	var price_gallon_error = document.getElementById("price_gallon_error");

	// Clear error messages; second time around may have valid value for one box, but others still invalid
	miles_driven_error.firstChild.nodeValue = "";
	gallons_used_error.firstChild.nodeValue = "";
	price_gallon_error.firstChild.nodeValue = "";

	/* Below are the conditial statements that will display error messages if the input values are not valid numbers OR if value is less than or equal to 0, to which it will then be considered invalid.
	*/

	// Display error message for all three input boxes if all three are invalid 
	if ((isNaN(miles_driven) || miles_driven  <= 0) &&
		(isNaN(gallons_used) || gallons_used  <= 0) && 
		(isNaN(price_gallon) || price_gallon  <= 0)){
		miles_driven_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for miles driven.";
		gallons_used_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for gallons used.";
		price_gallon_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for price per gallon.";
		return false;
	}

	// Display error message for two of the three input boxes if only one was valid, and still stop function
	if ((isNaN(miles_driven) || miles_driven <= 0) && 
		(isNaN(gallons_used) || gallons_used <= 0) /*&&
		!isNaN(price_gallon) && price_gallon >  0*/){
		miles_driven_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for miles driven.";
		gallons_used_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for gallons used.";
		//alert("Why is this being called")
		return false;
	}
	if ((isNaN(miles_driven) || miles_driven <= 0) && 
		(isNaN(price_gallon) || price_gallon <= 0) /*&&
		!isNaN(gallons_used) && gallons_used >  0*/){
		miles_driven_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for miles driven.";
		price_gallon_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for price per gallon.";
		return false;
	}
	if ((isNaN(gallons_used) || gallons_used <= 0) && 
		(isNaN(price_gallon) || price_gallon <= 0)/*&&
		!isNaN(miles_driven) && miles_driven >  0*/){
		gallons_used_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for gallons used.";
		price_gallon_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for price per gallon.";
		return false;
	}

	// Display error message for only one of three input boxes if other two are valid, and still stop function
	if ( isNaN(miles_driven) || miles_driven <= 0 /*&&
		!isNaN(gallons_used) && gallons_used >  0 &&
		!isNaN(price_gallon) && price_gallon >  0*/){
		miles_driven_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for miles driven.";
		return false;
	}
	if ( isNaN(gallons_used) || gallons_used <= 0 /*&&
		!isNaN(miles_driven) && miles_driven >  0 &&
		!isNaN(price_gallon) && price_gallon >  0*/){
		gallons_used_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for gallons used.";
		return false;
	}
	if ( isNaN(price_gallon) || price_gallon <= 0 /*&&
		!isNaN(miles_driven) && miles_driven >  0 &&
		!isNaN(gallons_used) && gallons_used >  0*/){
		price_gallon_error.firstChild.nodeValue = "Please enter a valid number greater than 0 for price per gallon.";
		return false;
	}

	// Perform the calculations and write the results to page 
	var miles_per_gallon = miles_driven / gallons_used;
	var cost_of_the_trip = gallons_used * price_gallon;
	var displayMPG       = document.getElementById("mpg");
	var displayCost      = document.getElementById("cost");

	displayMPG.firstChild.nodeValue = "Your miles per gallon are " + miles_per_gallon.toFixed(2);
	displayCost.firstChild.nodeValue = "The cost of your trip is $" + cost_of_the_trip.toFixed(2);

}

// Function to have addEventListeners for buttons that will be called when window loads
function init(){
	document.getElementById("btnCalc").addEventListener("click", calculateMPGAndCost, false);
	document.getElementById("btnClear").addEventListener("click", clearForm, false);
}

// Load function to include addEventListeners upon window load
window.onload = init;
</script>
</head>
<body>

<h1>Calculate Your MPG</h1>
    <h2>Enter the information below to see if you are getting good mileage!</h2>

    <form id="mpgform">
        <label for="miles_driven">Miles Driven: </label>
        <input type="text"  id="miles_driven" name="miles_driven" >
        <span class="error" id="miles_driven_error"> </span> 

        <label for="gallons_used">Gallons of Gas Used: </label>
        <input type="text"  id="gallons_used" name="gallons_used" >
        <span class="error" id="gallons_used_error"> </span>  

        <label for="price_gallon">Price per gallon: </label>
        <input type="text"  id="price_gallon" name="price_gallon" >
        <span class="error" id="price_gallon_error"> </span>   
 
        <input type="button" id="btnCalc"  value="Calculate the MPG and Cost of the Trip" class="clear">
      
        <input type="button" id="btnClear" value="Clear Form"> 
    </form>
    
    <span id="mpg"> </span><br>
	<span id="cost"> </span>

</body>
</html>